<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé® Broken Phone Art</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="app">

        <!-- ========== –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù ========== -->
        <section id="screen-home" class="screen active">
            <div class="home-container">
                <div class="logo">
                    <h1>üé® Broken Phone Art</h1>
                    <p class="subtitle">–†–∏—Å—É–π. –£–≥–∞–¥—ã–≤–∞–π. –£–º–∏—Ä–∞–π —Å–æ —Å–º–µ—Ö—É.</p>
                </div>

                <div class="name-input">
                    <input type="text" id="player-name" placeholder="–¢–≤–æ—ë –∏–º—è"
                           maxlength="15" autocomplete="off">
                </div>

                <div class="home-buttons">
                    <button id="btn-create" class="btn btn-primary btn-large">
                        üè† –°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É
                    </button>
                    <div class="join-section">
                        <input type="text" id="room-code-input" placeholder="–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã"
                               maxlength="5" style="text-transform: uppercase" autocomplete="off">
                        <button id="btn-join" class="btn btn-secondary">
                            üö™ –í–æ–π—Ç–∏
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========== –õ–û–ë–ë–ò ========== -->
        <section id="screen-lobby" class="screen">
            <div class="lobby-container">
                <div class="room-header">
                    <h2>–ö–æ–º–Ω–∞—Ç–∞: <span id="room-code-display" class="room-code"></span></h2>
                    <button id="btn-copy-code" class="btn btn-small" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥">üìã</button>
                </div>

                <div class="players-grid" id="players-list"></div>

                <div class="settings-panel" id="settings-panel">
                    <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                    <div class="setting-row">
                        <label>üé≠ –†–µ–∂–∏–º</label>
                        <select id="setting-mode">
                            <option value="classic">–ö–ª–∞—Å—Å–∏–∫–∞</option>
                            <option value="drawings-only">–¢–æ–ª—å–∫–æ —Ä–∏—Å—É–Ω–∫–∏</option>
                            <option value="speedrun">Speedrun (15 —Å–µ–∫)</option>
                            <option value="chaos">–•–∞–æ—Å üé≤</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label>üé® –í—Ä–µ–º—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è</label>
                        <input type="range" id="setting-draw-time" min="15" max="120" value="60" step="5">
                        <span id="draw-time-value">60—Å</span>
                    </div>
                    <div class="setting-row">
                        <label>‚úçÔ∏è –í—Ä–µ–º—è –Ω–∞ —Ç–µ–∫—Å—Ç</label>
                        <input type="range" id="setting-guess-time" min="10" max="90" value="45" step="5">
                        <span id="guess-time-value">45—Å</span>
                    </div>
                    <div class="setting-row">
                        <label>üé≤ –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã</label>
                        <label class="toggle">
                            <input type="checkbox" id="setting-modifiers">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <button id="btn-start-game" class="btn btn-primary btn-large">
                    üöÄ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
                </button>
                <p id="lobby-status" class="status-text"></p>
            </div>
        </section>

        <!-- ========== –ò–ì–†–ê: –í–í–û–î –§–†–ê–ó–´ ========== -->
        <section id="screen-write" class="screen">
            <div class="game-container">
                <div class="game-header">
                    <div class="step-indicator">
                        <span id="step-number"></span>
                    </div>
                    <div class="timer" id="timer-write">
                        <div class="timer-circle">
                            <span id="timer-write-value">60</span>
                        </div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-write"></div>
                    </div>
                </div>

                <div id="write-prompt" class="prompt"></div>

                <!-- –ï—Å–ª–∏ —É–≥–∞–¥—ã–≤–∞–µ–º —Ä–∏—Å—É–Ω–æ–∫ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ–≥–æ -->
                <div id="reference-image-container" class="reference-container" style="display:none">
                    <img id="reference-image" src="" alt="–†–∏—Å—É–Ω–æ–∫">
                </div>

                <div class="write-area">
                    <input type="text" id="phrase-input" placeholder="–û–ø–∏—à–∏ —á—Ç–æ –≤–∏–¥–∏—à—å..."
                           maxlength="100" autocomplete="off">
                    <button id="btn-submit-phrase" class="btn btn-primary">
                        ‚úÖ –û—Ç–ø—Ä–∞–≤–∏—Ç—å
                    </button>
                </div>

                <div id="submission-status" class="submission-status"></div>
            </div>
        </section>

        <!-- ========== –ò–ì–†–ê: –†–ò–°–û–í–ê–ù–ò–ï ========== -->
        <section id="screen-draw" class="screen">
            <div class="game-container">
                <div class="game-header">
                    <div class="step-indicator">
                        <span id="step-number-draw"></span>
                    </div>
                    <div class="timer" id="timer-draw">
                        <div class="timer-circle">
                            <span id="timer-draw-value">60</span>
                        </div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-draw"></div>
                    </div>
                </div>

                <div id="draw-prompt" class="prompt">
                    <p>–ù–∞—Ä–∏—Å—É–π: <strong id="phrase-to-draw"></strong></p>
                </div>

                <div id="modifier-banner" class="modifier-banner" style="display:none">
                    <span id="modifier-icon"></span>
                    <span id="modifier-text"></span>
                </div>

                <div class="canvas-wrapper">
                    <canvas id="drawing-canvas" width="600" height="450"></canvas>
                </div>

                <div class="toolbar">
                    <div class="tool-group colors">
                        <button class="color-btn active" data-color="#000000"
                                style="background:#000000"></button>
                        <button class="color-btn" data-color="#FF0000"
                                style="background:#FF0000"></button>
                        <button class="color-btn" data-color="#FF6600"
                                style="background:#FF6600"></button>
                        <button class="color-btn" data-color="#FFD700"
                                style="background:#FFD700"></button>
                        <button class="color-btn" data-color="#00CC00"
                                style="background:#00CC00"></button>
                        <button class="color-btn" data-color="#0066FF"
                                style="background:#0066FF"></button>
                        <button class="color-btn" data-color="#9933FF"
                                style="background:#9933FF"></button>
                        <button class="color-btn" data-color="#FF69B4"
                                style="background:#FF69B4"></button>
                        <button class="color-btn" data-color="#8B4513"
                                style="background:#8B4513"></button>
                        <button class="color-btn" data-color="#FFFFFF"
                                style="background:#FFFFFF; border:2px solid #ccc"></button>
                    </div>

                    <div class="tool-group sizes">
                        <button class="size-btn active" data-size="3">
                            <span style="width:6px;height:6px"></span>
                        </button>
                        <button class="size-btn" data-size="8">
                            <span style="width:12px;height:12px"></span>
                        </button>
                        <button class="size-btn" data-size="15">
                            <span style="width:18px;height:18px"></span>
                        </button>
                        <button class="size-btn" data-size="25">
                            <span style="width:24px;height:24px"></span>
                        </button>
                    </div>

                    <div class="tool-group actions">
                        <button id="btn-eraser" class="tool-btn" title="–õ–∞—Å—Ç–∏–∫">üßπ</button>
                        <button id="btn-undo" class="tool-btn" title="–û—Ç–º–µ–Ω–∏—Ç—å">‚Ü©Ô∏è</button>
                        <button id="btn-clear" class="tool-btn" title="–û—á–∏—Å—Ç–∏—Ç—å">üóëÔ∏è</button>
                        <button id="btn-fill" class="tool-btn" title="–ó–∞–ª–∏–≤–∫–∞">ü™£</button>
                    </div>
                </div>

                <button id="btn-submit-drawing" class="btn btn-primary">
                    ‚úÖ –ì–æ—Ç–æ–≤–æ!
                </button>

                <div id="submission-status-draw" class="submission-status"></div>
            </div>
        </section>

        <!-- ========== –û–ñ–ò–î–ê–ù–ò–ï ========== -->
        <section id="screen-waiting" class="screen">
            <div class="waiting-container">
                <div class="spinner"></div>
                <h2>–ñ–¥—ë–º –æ—Å—Ç–∞–ª—å–Ω—ã—Ö...</h2>
                <p id="waiting-progress">0 / 0 –æ—Ç–ø—Ä–∞–≤–∏–ª–∏</p>
            </div>
        </section>

        <!-- ========== –ü–û–ö–ê–ó –†–ï–ó–£–õ–¨–¢–ê–¢–û–í ========== -->
        <section id="screen-results" class="screen">
            <div class="results-container">
                <h2>üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã!</h2>

                <div id="chain-viewer" class="chain-viewer">
                    <div class="chain-nav">
                        <button id="btn-prev-chain" class="btn btn-small">‚¨ÖÔ∏è</button>
                        <span id="chain-counter">–¶–µ–ø–æ—á–∫–∞ 1 / 4</span>
                        <button id="btn-next-chain" class="btn btn-small">‚û°Ô∏è</button>
                    </div>

                    <div id="chain-steps" class="chain-steps"></div>

                    <div class="reaction-bar" id="reaction-bar">
                        <button class="reaction-btn" data-emoji="üòÇ">üòÇ</button>
                        <button class="reaction-btn" data-emoji="üî•">üî•</button>
                        <button class="reaction-btn" data-emoji="üíÄ">üíÄ</button>
                        <button class="reaction-btn" data-emoji="üòç">üòç</button>
                        <button class="reaction-btn" data-emoji="ü§î">ü§î</button>
                        <button class="reaction-btn" data-emoji="üëè">üëè</button>
                    </div>
                </div>

                <!-- –ê–ß–ò–í–ö–ò -->
                <div id="achievements-section" class="achievements-section">
                    <h3>üèÜ –ù–∞–≥—Ä–∞–¥—ã</h3>
                    <div id="achievements-list" class="achievements-list"></div>
                </div>

                <div class="results-buttons">
                    <button id="btn-play-again" class="btn btn-primary btn-large">
                        üîÑ –ï—â—ë —Ä–∞—É–Ω–¥!
                    </button>
                    <button id="btn-save-gallery" class="btn btn-secondary">
                        üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –≥–∞–ª–µ—Ä–µ—é
                    </button>
                    <button id="btn-download-chain" class="btn btn-secondary">
                        üì• –°–∫–∞—á–∞—Ç—å —Ü–µ–ø–æ—á–∫—É
                    </button>
                </div>
            </div>
        </section>

        <!-- ========== –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø ========== -->
        <div id="toast-container" class="toast-container"></div>

    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="js/canvas.js"></script>
    <script src="js/sounds.js"></script>
    <script src="js/app.js"></script>
</body>
</html>